<!DOCTYPE html>
<html>
<head>
  <title>Daily GRE Routine</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #eef2f3, #d9e2ec);
      display: flex;
      justify-content: center;
      padding: 40px 0;
    }

    .app {
      background: #ffffff;
      width: 90%;
      max-width: 600px;
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 10px;
    }

    .thought {
      background: #f5f7fa;
      padding: 12px 16px;
      border-left: 4px solid #4CAF50;
      border-radius: 8px;
      font-style: italic;
      margin-bottom: 20px;
    }

    .task {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      margin-bottom: 10px;
      background: #f9fafb;
      border-radius: 10px;
      cursor: pointer;
    }

    .task.completed {
      background: #e6f4ea;
      text-decoration: line-through;
    }

    input[type="checkbox"] {
      pointer-events: none;
      transform: scale(1.2);
    }

    button {
      width: 100%;
      padding: 14px;
      margin-top: 20px;
      background: #4CAF50;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div class="app">
  <h2>Daily GRE Routine</h2>

  <div class="thought" id="thoughtBox"></div>

  <div id="tasks"></div>

  <button onclick="submitData()">Submit Routine</button>

  <canvas id="progressChart"></canvas>
</div>

<script>
/* ðŸ”´ VERY IMPORTANT: PUT YOUR WEB APP URL HERE */
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzLDqJHlzjJ7yqDtXY_3U4jrGeZuPKuB_1aWVicUfAA0yMqCmTVOd4FzYWbEyRxRUKo/exec";

/* ===== DAILY THOUGHT ===== */
const thoughts = [
  "Choose the harder right over the easier wrong, and never let your wishbone grow where a backbone should be.",
  "You can go from failure to success, but you can't go from excuses to success."
];
document.getElementById("thoughtBox").innerText =
  thoughts[new Date().getDate() % 2];

/* ===== TASK LIST ===== */
const tasks = [
  ["Wake up at 5:00 AM","Morning",0],
  ["Quant â€“ Concept study","Morning",20],
  ["Quant â€“ Practice questions","Morning",40],
  ["Verbal practice â€“ questions","Morning",60],
  ["Verbal Mountain (Bus)","Bus",30],
  ["Quant Mountain (Bus)","Bus",30],
  ["Vocabulary â€“ 10 new words","Daily",20],
  ["Quant â€“ Concept revision","Night",20],
  ["Quant â€“ Video","Night",45],
  ["Quant â€“ Practice","Night",25],
  ["Vocabulary Video","Night",60],
  ["Text Completion â€“ 6 Q","Night",15],
  ["Sentence Equivalence â€“ 6 Q","Night",15]
];

const container = document.getElementById("tasks");

/* ===== RENDER TASKS ===== */
tasks.forEach((t, i) => {
  const div = document.createElement("div");
  div.className = "task";
  div.innerHTML = `<input type="checkbox" id="t${i}"> ${t[0]}`;
  div.onclick = () => toggleTask(i, div);
  container.appendChild(div);
});

/* ===== PIE CHART ===== */
const chart = new Chart(
  document.getElementById("progressChart"), {
    type: "pie",
    data: {
      labels: ["Completed", "Remaining"],
      datasets: [{
        data: [0, tasks.length],
        backgroundColor: ["#4CAF50", "#ddd"]
      }]
    }
  }
);

function updateChart() {
  const done = document.querySelectorAll(".task.completed").length;
  chart.data.datasets[0].data = [done, tasks.length - done];
  chart.update();
}

/* ===== TOGGLE TASK ===== */
function toggleTask(i, div) {
  const cb = document.getElementById("t" + i);
  cb.checked = !cb.checked;
  div.classList.toggle("completed");
  updateChart();
}

/* ===== SUBMIT DATA (THIS IS THE FIXED PART) ===== */
<script>
function submitData() {
  const payload = {
    date: new Date().toISOString().split("T")[0],
    day: new Date().toLocaleDateString("en-IN",{ weekday:"long" }),
    tasks: tasks.map((t,i)=>({
      task: t[0],
      timeSlot: t[1],
      duration: t[2],
      completed: document.getElementById("t"+i).checked
    }))
  };

  const formBody = new URLSearchParams();
  formBody.append("date", payload.date);
  formBody.append("day", payload.day);
  formBody.append("tasks", JSON.stringify(payload.tasks));

  // ðŸ”¥ NO headers, NO then/catch, NO response reading
  fetch(SCRIPT_URL, {
    method: "POST",
    body: formBody
  });

  alert("Routine submitted successfully âœ…");
}
</script>




</body>
</html>
